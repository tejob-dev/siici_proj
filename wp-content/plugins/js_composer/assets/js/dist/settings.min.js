window.vc||(window.vc={}),function(){vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};function l(e){return"\\"+n[e]}var a=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},i=/\\|'|\r|\n|\u2028|\u2029/g;vc.template=function(u,e){e=_.defaults({},e,vc.templateOptions.default);var n,t=RegExp([(e.escape||a).source,(e.interpolate||a).source,(e.evaluate||a).source].join("|")+"|$","g"),c=0,o="__p+='";u.replace(t,function(e,n,t,r,a){return o+=u.slice(c,a).replace(i,l),c=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":t?o+="'+\n((__t=("+t+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),e}),o+="';\n",o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(o=e.variable?o:"with(obj||{}){\n"+o+"}\n")+"return __p;\n";try{n=new Function(e.variable||"obj","_",o)}catch(e){throw e.source=o,e}function r(e){return n.call(this,e,_)}t=e.variable||"obj";return r.source="function("+t+"){\n"+o+"}",r}}();
!function(e){_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"",mode:"",is_focused:!1,ace_enabled:!1,initialize:function(t){t&&0<t.length&&(this.sel=t),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(t){if(!this.missingUnfilteredHtml())return this.aceEnabled()?this.setEditorAce(t):this.setEditorTextarea(t),this.$editor},missingUnfilteredHtml:function(){return e("#"+this.sel).hasClass("wpb_missing_unfiltered_html")},focus:function(){var t;this.is_focused&&(this.aceEnabled()?(this.$editor.focus(),t=this.$editor.session.getLength(),this.$editor.gotoLine(t,this.$editor.session.getLine(t-1).length)):this.$editor.focus())},setEditorAce:function(t){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/"+this.mode),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(t),this.$editor.clearSelection(),this.is_focused&&this.$editor.focus();t=this.$editor.getSession().getLength();return this.$editor.gotoLine(t,this.$editor.getSession().getLine(t-1).length),this.$editor},setEditorTextarea:function(t){return this.$editor||(this.$editor=e("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),e("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(t),this.is_focused&&this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var t=e(window).height()-380;this.aceEnabled()?e("#"+this.sel).css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var t=e("#"+this.sel);this.aceEnabled()?t.css({height:"30vh",minHeight:"30vh"}):(this.$editor.parent().css({height:"30vh",minHeight:"30vh"}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery);
!function(d){d(function(){var a=d('[data-vc-roles="form"]');d('[data-vc-roles="part-state"]').on("click",function(){var e=d(this);e.data("vcCustomSelector",e.find(":selected").data("vcCustomSelector")||"")}).on("change",function(){var e,a,t=d(this),c=t.data("vcRolePart"),c=d('[data-vc-role-related-part="'+c+'"]');if("*"===c.data("vcRolePartState"))return!1;e=t.val(),a=t.data("vcCustomSelector")||"",c.data("vcRolePartState").toString()===e?(c.addClass("vc_visible"),a.length&&c.find(t.data("vcCustomSelector")).prop("checked",!0)):c.removeClass("vc_visible")}),a.on("submit",function(e){var t,c={};e&&e.preventDefault&&e.preventDefault(),(t=d("#submit_btn")).attr("disabled",!0),d("#vc_wp-spinner").show(),c.action=d("#vc_settings-roles-action").val(),c.vc_nonce_field=d("#vc_nonce_field").val(),c.vc_roles={},d("[data-vc-role]").each(function(){var e=d(this),a=e.data("vcRole"),t={};e.find("select").each(function(){var e=d(this),a=e.data("vcPart");void 0===t[a]&&(t[a]={}),t[a][e.data("vcName")]=e.val()}),e.find('[data-vc-role-related-part].vc_visible [data-vc-name][type="checkbox"]').each(function(){var e=d(this),a=e.data("vcPart");void 0===t[a]&&(t[a]={}),t[a][e.data("vcName")]=e.is(":checked")?e.val():"0"}),c.vc_roles[a]=JSON.stringify(t)}),d.ajax({url:a.attr("action"),type:"POST",dataType:"json",data:c,context:this}).done(function(e){var a;d("#vc_wp-spinner").hide(),e.message&&((a=d('<div id="vc_roles-message" class="updated vc_updater-result-message hidden"><p><strong></strong></p></div>')).find("strong").text(e.message),a.insertBefore(t).fadeIn(100),window.setTimeout(function(){a.slideUp(100,function(){d(this).remove(),t.attr("disabled",!1)})},2e3))})})}),d("[data-vc-accordion]").on("show.vc.accordion",function(){d(this).addClass("vc_opened")}).on("hide.vc.accordion",function(){d(this).removeClass("vc_opened")}),d('[data-vc-ui-element="panel-tab-control"]').on("click",function(e){var a=d(this),t=a.parents("fieldset").first(),c=".vc_wp-form-table";e.preventDefault(),d('[data-vc-ui-element="panel-tabs-controls"] .vc_active',t).removeClass("vc_active"),a.parent().addClass("vc_active"),e=a.data("filter"),t.attr("data-vc-roles-filter-value",e),c+=" "+e,d(".vc_wp-form-table [data-vc-capability]",t).addClass("vc_hidden"),d(c,t).removeClass("vc_hidden")}),d('[data-vc-roles="table-checkbox"]').on("change",function(){var e=d(this);(e.is(":checked")?e.parents("tr:first").find('[data-vc-name!="'+e.attr("data-vc-name")+'"]:checked'):e.parents('[data-vc-roles="table"]').first().find('[data-vc-roles-select-all-checkbox="'+e.data("vcCap")+'"]')).prop("checked",!1)}),d("[data-vc-roles-select-all-checkbox]").on("change",function(){var e=d(this),a=e.is(":checked"),t=e.parents('[data-vc-roles="table"]').first(),c=t.find(e.data("vcRelatedControls")),o=e.data("vcRolesSelectAllCheckbox");t.find('[data-vc-cap="'+o+'"]:visible').prop("checked",a),c.prop("checked",a),a&&_.defer(function(){t.find("[data-vc-roles-select-all-checkbox!="+o+"]:not([data-vc-cap])").prop("checked",!1),t.find('[data-vc-cap!="'+o+'"]:not([data-vc-roles-select-all-checkbox]):visible').prop("checked",!1)})}),d('[data-vc-role-related-part].vc_visible [data-vc-roles="table"]').each(function(){var t=d(this);t.find("thead [data-vc-roles-select-all-checkbox]").each(function(){var e=d(this),a=e.data("vcRolesSelectAllCheckbox");t.find('[data-vc-cap="'+a+'"]:not(:checked)').length||(e.prop("checked",!0),t.find('tfoot [data-vc-roles-select-all-checkbox="'+a+'"]').prop("checked",!0))})})}(window.jQuery);
_.isUndefined(window.vc)&&(window.vc={}),jQuery(document).ready(function(e){_.isUndefined(window.less)||(window.vc.less={},window.vc.less.options={relativeUrls:!1,rootpath:!1},window.less.options.env=vcData.debug?"development":"production",window.less.options.logLevel=vcData.debug?4:0,window.vc.less.generateLessFormData=function(s,e){var o={};return _.isEmpty(e)||_.each(e,function(e,i){var t,n;_.isString(e)?(t=_.first(_.where(s,{name:e})),_.isObject(t)&&0<(n=t.value).length&&(o[i]=n)):_.isObject(e)&&!_.isUndefined(e.key)&&(t=_.first(_.where(s,{name:e.key})),_.isObject(t)||_.isUndefined(e.default_key)?_.isObject(t)||_.isUndefined(e.default)||(t={value:e.default}):t=_.isUndefined(o[e.default_key])?_.first(_.where(s,{name:e.default_key})):{value:o[e.default_key]},_.isObject(t))&&(n=t.value,_.isUndefined(e.modify_output)||!_.isObject(e.modify_output)||_.isEmpty(e.modify_output)||_.each(e.modify_output,function(e){_.isUndefined(e.plain)||!_.isObject(e.plain)||_.isEmpty(e.plain)||_.each(e.plain,function(e){e=e.replace("{{ value }}",n);n=e})}),n)&&0<n.length&&(o[i]=n)}),o},window.vc.less.fileManager=less.FileManager.prototype.extractUrlParts,window.less.FileManager.prototype.extractUrlParts=function(e,i){return e+="?v="+(window.vcData&&window.vcData.version?window.vcData.version:"4.5"),vc.less.fileManager(e,i)},window.vc.less.build=function(e,i){var t;this.options=_.extend({},{modifyVars:{},variablesDataLinker:{},lessPath:""},this.options,e),this.options.modifyVars=this.generateLessFormData(this.options.modifyVars,this.options.variablesDataLinker),t=this,_.defer(function(){less.render('@import "'+t.options.lessPath+'";',t.options).then(function(e){i&&i.call(t,e)},function(e){i&&i.call(t,void 0,e)})})})});
var vc_am={current_form:!1};window.i18nLocaleVcAutomapper=window.i18nLocaleSettings,function(s){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}vc_am.vcGuid=function(){return e()+e()+"-"+e()},_.extend(wp.shortcode.prototype,{taggedString:function(){var a='[<span class="vc_preview-tag">'+_.escape(this.tag)+"</span>";return _.each(this.attrs.numeric,function(e){/\s/.test(e)?a+=' <span class="vc_preview-param">"'+_.escape(e)+'"</span>':a+=' <span class="vc_preview-param">'+_.escape(e)+"</span>"}),_.each(this.attrs.named,function(e,t){a+=' <span class="vc_preview-param">'+_.escape(t)+'="'+_.escape(e)+'"</span>'}),"single"===this.type?a+"]":"self-closing"===this.type?a+" /]":(a+="]",this.content&&(a+='<span class="vc_preview-content">'+_.escape(this.content)+"</span>"),a+'[/<span class="vc_preview-tag">'+_.escape(this.tag)+"</span>]")}}),wp.shortcode.atmPreview=function(e){return new wp.shortcode(e).taggedString()};var r,a,i=s("#vc_settings-automapper");function n(e,t){a&&(window.clearTimeout(a),s(".vc_settings-automapper").remove(),a=!1);t=s('<div class="vc_atm-message updated'+(t?" vc_message-"+t:"")+'" style="display: none;"></div>');t.text(e),t.prependTo(i).fadeIn(500,function(){var e=s(this);window.setTimeout(function(){e.remove()},5e3)})}function c(e,t){var a,i,r;!_.isUndefined(t)&&t.length||(t=s(".tab_intro")),e=e,a="error",(i=void 0)||s(".vc_atm-message").remove(),(r=s('<div class="vc_atm-message '+(a||"")+'" style="display: none;"></div>')).text(e),_.isUndefined(i)||window.setTimeout(function(){r.remove()},i),r.insertBefore(t).fadeIn(500)}var o,m=function(e){return(e=e.replace(/_|-/," ")).charAt(0).toUpperCase()+e.slice(1)},t="?",d=(-1<window.ajaxurl.indexOf("?")&&(t="&"),r=window.ajaxurl+t+"vc_action=automapper",t=function(t,a,i){var e="create"===t?(a.set("id",vc_am.vcGuid()),{vc_action:"create",action:"vc_automapper_create",data:a.toJSON()}):"update"===t?{vc_action:"update",action:"vc_automapper_update",id:a.get("id"),data:a.toJSON()}:"delete"===t?{vc_action:"delete",action:"vc_automapper_delete",id:a.get("id")}:{vc_action:"read",action:"vc_automapper_read"};s.ajax({method:"POST",url:r,dataType:"json",data:_.extend(e,{_vcnonce:window.vcAdminNonce}),context:this}).done(function(e){e.success&&((e=(e=e.data)&&"read"===t?e:a)?"read"===t&&i.success(e):i.error("Not found"))}).fail(function(e){})},Backbone.Model.extend({defaults:function(){return{tag:"",name:"",category:"",description:"",params:[]}},sync:t})),d=Backbone.Collection.extend({model:d,sync:t}),t=(vc_am.shortcodes=new d,Backbone.View.extend({tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, widget-action":"edit","click .vc_automapper-delete-btn":"clear"},template_html:s("#vc_automapper-item-tpl").html()||"<span>{{ tag }}</span>",initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.removeView)},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},edit:function(e){e&&e.preventDefault&&e.preventDefault(),new o({model:this.model}).render()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&this.model.destroy()},removeView:function(){this.$el.remove()}}),Backbone.View.extend({render:function(){return vc_am.current_form&&vc_am.current_form.close(),vc_am.current_form=this},getType:function(){return"form"},validate:function(e){var a,i=!1;return e.name?e.tag&&e.tag.match(/^\S+$/)?(a=["param_name","heading","type"],_.each(e.params,function(t){_.each(a,function(e){""!==t[e]&&("param_name"!==e||t[e].match(/^[a-z0-9_]+$/g))||(i=window.i18nLocaleVcAutomapper.error_enter_required_fields)},this)},this),i||null):window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag:window.i18nLocaleVcAutomapper.error_shortcode_name_is_required},isValid:function(e){return this.validationError=this.validate(e),!this.validationError},close:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form=!1,this.remove()}})),l=Backbone.View.extend({_$widget_title:!1,_$form_view:!1,edit_view:!1,tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, .widget-action":"edit"},template_html:s("#vc_automapper-item-complex-tpl").html()||"<span>{{ tag }}</span>",header_template_html:'<h4>{{ name }}<span class="in-widget-title"></span></h4>',initialize:function(){_.bindAll(this,"removeEditForm"),this.listenTo(this.model,"destroy",this.removeView),this.model.view=this},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},renderTitle:function(){var e=vc.template(this.header_template_html,vc.templateOptions.custom);this.$widgetTitle().html(e(this.model.toJSON()))},edit:function(e){if(e&&e.preventDefault&&e.preventDefault(),this.$editForm().is(":animated"))return!1;this.$el.addClass("vc_opened"),this.edit_view?this.close():this.edit_view=new p({model:this.model}).render()},$widgetTitle:function(){return this._$widget_title||(this._$widget_title=this.$el.find(".widget-title")),this._$widget_title},$editForm:function(){return this._$edit_form||(this._$edit_form=this.$el.find(".widget-inside")),this._$edit_form},removeEditForm:function(){this.edit_view&&this.edit_view.remove(),this.edit_view=!1},beforeSave:function(){this.$el.find("#vc_atm-name").val(s("#vc_atm-header-name").val())},close:function(){vc_am.current_form=!1,this.$el.removeClass("vc_opened"),this.renderTitle(),this.$editForm().slideUp(200),this.removeEditForm()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.destroy()},removeView:function(){this.remove()}}),v=t.extend({className:"vc_add-form-atm",template_html:s("#vc_automapper-add-form-tpl").html(),events:{"click #vc_atm-parse-string":"parseShortcode","click .vc_atm-cancel":"close"},getType:function(){return"create"},render:function(){v.__super__.render.call(this);var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e()),this.$el.insertAfter(".vc_automapper-toolbar"),this},shortcodesRegexp:_.memoize(function(){return new RegExp("\\[(\\[?)([\\w|-]+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")}),parseShortcode:function(e){e&&e.preventDefault&&e.preventDefault();var t,a=[],e=s("#vc_atm-shortcode-string").val();return!_.isEmpty(e)&&(e=e.match(this.shortcodesRegexp()))?(t=wp.shortcode.attrs(e[3]),_.each(t.named,function(e,t){a.push({param_name:t,type:"textfield",heading:m(t),description:"Example: "+e,value:e})},this),e[5]&&a.push({param_name:"content",type:"textarea",heading:"Content",description:"",value:e[5]}),t={tag:e[2],name:m(e[2]),category:window.i18nLocaleVcAutomapper.my_shortcodes_category,params:a},void(this.isValid(t)?(vc_am.shortcodes.create(t),n(window.i18nLocaleVcAutomapper.new_shortcode_mapped,"success"),s(".vc_atm-message").remove(),vc_am.shortcodes.last().view.edit()):(this.$el.addClass("form-invalid"),c(this.validationError)))):(this.$el.addClass("form-invalid"),c(window.i18nLocaleVcAutomapper.error_enter_valid_shortcode,this.$el),!1)}}),p=(o=t.extend({className:"vc_edit-form",active_preview:!1,events:{"click #vc_atm-save":"save","click .vc_atm-cancel":"close","click .vc_atm-delete":"clear","click #vc_atm-add-param":"addParam","click .vc_delete-param":"deleteParam","change #vc_atm-is-container":"setContentParam","keyup .vc_param-name, .vc_param-value, #vc_atm-tag":"setPreview","focus #vc_atm-tag":"setTagFieldActive","focus .vc_params input, .vc_params textarea":"setParamFieldActive","focus .vc_param.vc_content input, .vc_param.vc_content textarea":"setContentParamFieldActive","blur #vc_atm-tag, vc_param input":"unsetFieldActive",'change .vc_param-field [name="type"]':"changeParamType"},new:!1,template_html:s("#vc_automapper-form-tpl").html(),param_template_html:s("#vc_atm-form-param-tpl").html(),getType:function(){return"edit"},render:function(){o.__super__.render.call(this);var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())),this.$el.insertAfter(s("[data-item-id="+this.model.id+"]").hide()),this.addAllParams(),this},changeParamType:function(e){var e=s(e.currentTarget),t=e.parents(".vc_fields");"hidden"===e.val()?(t.find('[name="heading"]').attr("disabled",!0),t.find('[name="description"]').attr("disabled",!0)):(t.find('[name="heading"]').attr("disabled",!1),t.find('[name="description"]').attr("disabled",!1))},setTagFieldActive:function(e){this.active_preview&&s(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-tag",s(this.active_preview).addClass("vc_active")},setParamFieldActive:function(e){e=s(e.currentTarget).parents(".vc_param:first").index();this.active_preview&&s(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-param:eq("+e+")",s(this.active_preview).addClass("vc_active")},setContentParamFieldActive:function(e){this.active_preview&&s(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-content",s(this.active_preview).addClass("vc_active")},unsetFieldActive:function(e){s(this.active_preview).removeClass("vc_active"),this.active_preview=!1},escapeParam:function(e){return e&&e.replace(/"/g,"``")},getPreview:function(e){var t=e.params,a=!1,i={};return _.each(t,function(e,t){"content"!==e.param_name?i[e.param_name]=this.escapeParam(e.value):a=e.value},this),wp.shortcode.atmPreview({tag:e.tag,attrs:i,content:a,type:!1===a?"single":""})},setPreview:function(){var e={params:this.getParams(),tag:s("#vc_atm-tag").val()};s("#vc_shortcode-preview").html(this.getPreview(e)),this.active_preview&&s(this.active_preview).addClass("vc_active")},save:function(e){e&&e.preventDefault&&e.preventDefault(),this.$el.find(".vc_error").removeClass("vc_error");e={tag:s("#vc_atm-tag").val(),name:s("#vc_atm-name").val(),category:s("#vc_atm-category").val(),description:s("#vc_atm-description").val(),params:this.getParams()};this.isValid(e)?(this.model.save(e),n(window.i18nLocaleVcAutomapper.shortcode_updated,"success"),this.close()):c(this.validationError,this.$el.find("#vc_atm-save"))},validate:function(e){var r,n,c;return s(".vc_error,.form-invalid").removeClass("vc_error form-invalid"),r=!1,n={},e.name?e.tag&&e.tag.match(/^\S+$/)?(c=["param_name","heading","type"],_.each(e.params,function(t,a){var i=s("#vc_atm-params-list [name=param_name]:eq("+a+")");"content"!==t.param_name||i.data("system")?(_.isBoolean(n[t.param_name])&&1==n[t.param_name]&&(i.addClass("vc_error"),i.closest(".vc_param-field").addClass("form-invalid"),r=r||window.i18nLocaleVcAutomapper.error_param_already_exists.replace(/\%s/,t.param_name)),n[t.param_name]=!0,_.each(c,function(e){"hidden"!==t.type&&""===t[e]||"hidden"===t.type&&"heading"!==e&&""===t[e]?(s("#vc_atm-params-list [name="+e+"]:eq("+a+")").addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),r=r||window.i18nLocaleVcAutomapper.error_enter_required_fields):"param_name"!==e||t[e].match(/^[a-z0-9_]+$/g)||(i.addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),r=r||window.i18nLocaleVcAutomapper.error_wrong_param_name)},this)):(r=window.i18nLocaleVcAutomapper.error_content_param_not_manually,i.addClass("vc_error"),i.closest(".vc_param-field").addClass("form-invalid"))},this),r||null):(s("#vc_atm-tag").addClass("vc_error").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag):(s("#vc_atm-name").addClass("vc_error"),s("#vc_atm-header-name").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_shortcode_name_is_required)},setContentParam:function(e){s(e.currentTarget)[0].checked?(this.addParamField({type:"textarea",heading:"Content",description:"",param_name:"content",value:""}),this.setParamSorting()):this.removeParamField("content"),s(".edit-form-info").initializeTooltips(".vc_wrapper"),this.setPreview()},addAllParams:function(){s("#vc_atm-params-list").empty(),_.each(this.model.get("params"),function(e){this.addParamField(e),"content"===e.param_name&&s("#vc_atm-is-container").prop("checked",!0)},this),this.setParamSorting()},getParams:function(){var t=[];return _.each(s(".vc_param"),function(e){e=s(e);t.push({param_name:e.find("[name=param_name]").val(),type:e.find("[name=type]").val(),description:e.find("[name=description]").val(),heading:e.find("[name=heading]").val(),value:e.find("[name=value]").val()})},this),t},addParam:function(e){e&&e.preventDefault&&e.preventDefault(),this.addParamField({type:"",heading:"",description:"",param_name:"",value:""}),s(".edit-form-info").initializeTooltips(".vc_wrapper"),this.setPreview()},removeParamField:function(e){s('.vc_param-name[value="'+e+'"]').parents(".vc_param").remove()},addParamField:function(e){var t=s('<div class="vc_param wpb_vc_row'+("content"===e.param_name?" vc_content":"")+'"/>').appendTo("#vc_atm-params-list"),a=vc.template(this.param_template_html,vc.templateOptions.custom);t.html(a(e))},setParamSorting:function(){s("#vc_atm-params-list").sortable({items:"> .vc_param",tolerance:"pointer",handle:".vc_move-param",update:this.setPreview,placeholder:"vc_sortable-placeholder"})},deleteParam:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete_param)&&(s(e.currentTarget).parents(".vc_param").remove(),this.setPreview())},close:function(e){e&&e.preventDefault&&e.preventDefault(),this.model&&s("[data-item-id="+this.model.get("id")+"]").show(),vc_am.current_form=!1,s(".vc_atm-message").remove(),this.remove()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.destroy(),this.close())}})).extend({template_html:s("#vc_automapper-form-tpl").html(),getType:function(){return"edit"},initialize:function(){_.bindAll(this,"setPreview")},render:function(){var e=this.model.view,t=(this.model.get("params"),o.__super__.render.call(this),vc.template(this.template_html,vc.templateOptions.custom));return this.$el.html(t(_.extend({shortcode_preview:this.getPreview(this.model.toJSON())},this.model.toJSON()))),this.$el.appendTo(e.$editForm()),e.$widgetTitle().html('<span class="vc_atm-header"><input type="text" name="name" value="" id="vc_atm-header-name" class="vc_header-name"></span><span class="in-widget-title"></span>'),s("#vc_atm-header-name").val(this.model.get("name")),this.addAllParams(),e.$editForm().slideDown(),s(".edit-form-info").initializeTooltips(".vc_wrapper"),this},save:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.view.beforeSave(),p.__super__.save.call(this)},close:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form=!1,this.model.view.close()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.view.clear(),this.remove())}}),d=Backbone.View.extend({events:{"click #vc_automapper-add-btn":"create",submit:"formSubmit"},className:"vc_atm-form",addFormView:!1,initialize:function(){this.listenTo(vc_am.shortcodes,"add",this.addOne),this.listenTo(vc_am.shortcodes,"reset",this.addAll),this.listenTo(vc_am.shortcodes,"all",this.render),this.$list=s(".vc_automapper-list"),vc_am.shortcodes.fetch()},formSubmit:function(e){e&&e.preventDefault&&e.preventDefault(),_.isObject(e)&&this.addFormView&&!_.isEmpty(e.currentTarget)&&!_.isEmpty(e.currentTarget[0])&&(e=e.currentTarget[0],s(e).is("#vc_atm-shortcode-string"))&&this.addFormView.parseShortcode()},addAll:function(e){e.each(function(e){this.addOne(e)},this)},addOne:function(e){e=new l({model:e});this.$list.append(e.render().el)},create:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form&&"create"===vc_am.current_form.getType()||(this.addFormView=(new v).render())},render:function(){}});i.length&&new d({el:i})}(window.jQuery);
jQuery(document).ready(function(i){function n(e,t,n){var o=new Date,t=(o.setDate(o.getDate()+n),encodeURIComponent(t)+(null===n?"":"; expires="+o.toUTCString()));document.cookie=e+"="+t}function e(e){for(var t,n,o=document.cookie.split(";"),s=0;s<o.length;s++)if(t=o[s].substr(0,o[s].indexOf("=")),n=o[s].substr(o[s].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))==e)return decodeURIComponent(n)}i(".wpb_settings_accordion").accordion({active:!!e("wpb_js_composer_settings_group_tab")&&e("wpb_js_composer_settings_group_tab"),collapsible:!0,change:function(e,t){void 0!==t.newHeader.attr("id")?n("wpb_js_composer_settings_group_tab","#"+t.newHeader.attr("id"),31536e3):n("wpb_js_composer_settings_group_tab","",31536e3)},heightStyle:"content"}),i(".wpb-settings-select-all-shortcodes").on("click",function(e){e.preventDefault(),i(this).parent().parent().find("[type=checkbox]").attr("checked",!0)}),i(".wpb-settings-select-none-shortcodes").on("click",function(e){e.preventDefault(),i(this).parent().parent().find("[type=checkbox]").removeAttr("checked")}),i(".vc_settings-tab-control").on("click",function(e){if(e.preventDefault(),i(this).hasClass("nav-tab-active"))return!1;i(this).attr("href");i(".vc_settings-tabs > .nav-tab-active").removeClass("nav-tab-active"),i(this).addClass("nav-tab-active")}),i(".vc_settings-tab-content").on("submit",function(){return!0}),i(".vc_show_example").on("click",function(e){e.preventDefault();e=i(".vc_helper");if(e.is(":animated"))return!1;e.toggle(100)}),i(".color-control").wpColorPicker(),i("#vc_settings-color-restore-default").on("click",function(e){e.preventDefault(),confirm(window.i18nLocaleSettings.are_you_sure_reset_color)&&(i("#vc_settings-color-action").val("restore_color"),i("#vc_settings-color").attr("action",window.location.href).find("[type=submit]").click())}),i("#wpb_js_use_custom").on("change",function(){this.checked?i("#vc_settings-color").addClass("color_enabled"):i("#vc_settings-color").removeClass("color_enabled")}),i("#vc_settings-updater-button").on("click",function(e){var t=i(this),n=t.data("vcAction"),o=t.parent();return o.addClass("loading"),t.attr("disabled",!0),i.getJSON(window.ajaxurl,{action:"vc_get_"+n+"_url",_vcnonce:window.vcAdminNonce},function(e){e&&e.status?window.location=e.url:(alert("Failed to get response from server. Please try again"),o.removeClass("loading"),t.removeAttr("disabled"))}).fail(function(){alert("Failed to get response from server. Please refresh page and try again"),o.removeClass("loading"),t.removeAttr("disabled")}),e.preventDefault(),!1});var t,o=new Vc_postSettingsEditor,s=(o.sel="wpb_css_editor",o.mode="css",o.is_focused=!0,new Vc_postSettingsEditor),r=(s.sel="wpb_js_header_editor",s.mode="javascript",new Vc_postSettingsEditor),a=(r.sel="wpb_js_footer_editor",r.mode="javascript",{css:o,js_header:s,js_footer:r});for(t in a){var c,l=i("#wpb_"+t+"_editor");l.length&&(l=l.prev(),c="editor"+t,window[c]=a[t],window[c].setEditor(l.val()),window[c].getEditor().on("change",d.bind(null,l,c)))}function d(e,t){e.val(window[t].getValue())}function v(e,t,n,o){o&&i(".vc_atm-message").remove();var s=i('<div class="vc_atm-message '+(t||"")+'" style="display: none;"><p></p></div>');return s.find("p").text(e),_.isUndefined(n)||window.setTimeout(function(){s.fadeOut(500,function(){i(this).remove()})},n),s}i("#vc_settings-vc-pointers-reset").on("click",function(e){e.preventDefault(),i.post(window.ajaxurl,{action:"vc_pointer_reset",_vcnonce:window.vcAdminNonce}),i(this).text(i(this).data("vcDoneTxt"))});var p=!1;i("#vc_settings-color").on("submit",function(e){var t,n,o,s;e.preventDefault(),p||(s=i("#submit_btn"),i("#wpb_js_use_custom").prop("checked")&&"restore_color"!==i("#vc_settings-color-action").val()?(p=!0,t=i(this).serializeArray(),n=s.data("vc-less-variables"),o=i('<span class="vc_settings-spinner vc_ui-wp-spinner"></span>'),s.val(window.i18nLocaleSettings.saving),o.insertBefore(s).show(),_.delay(function(){vc.less.build({modifyVars:t,variablesDataLinker:n,lessPath:s.data("vc-less-path"),rootpath:s.data("vc-less-root")},function(e,t){_.isUndefined(e)||_.isUndefined(e.css)?_.isUndefined(t)||(window.console&&window.console.warn&&window.console.warn("build error",t),v(window.i18nLocaleSettings.save_error+". "+t,"error",void 0,!0).insertBefore(s.parent()).fadeIn(500),s.val(window.i18nLocaleSettings.save),p=!1,o.remove()):(i('[name="wpb_js_compiled_js_composer_less"]').val(e.css),t=i("#vc_settings-color"),i.ajax({type:"POST",url:t.attr("action"),data:t.eq(0).serializeArray(),success:function(){v(window.i18nLocaleSettings.saved,"updated",5e3,!0).insertBefore(s.parent()).fadeIn(500),s.val(window.i18nLocaleSettings.save),p=!1,o.remove()},error:function(){v(window.i18nLocaleSettings.form_save_error,"error",void 0,!0).insertBefore(s.parent()).fadeIn(500),s.val(window.i18nLocaleSettings.save),p=!1,o.remove()}}))})},100)):this.submit())})});
!function(n){vc.showMessage=function(e,s,o,c){vc.message_timeout&&(n(".vc_message").remove(),window.clearTimeout(vc.message_timeout)),s=s||"success",o=o||1e4;var i=window.vc_mode&&"admin_page"===window.vc_mode?".metabox-composer-content":"body",c=c||i,t=n('<div class="vc_message '+s+'" style="z-index: 999;">'+e+"</div>").prependTo(n(c));t.fadeIn(500),vc.message_timeout=window.setTimeout(function(){t.slideUp(500,function(){n(this).remove()}),vc.message_timeout=!1},o)},window.vc_user_access&&!window.vc_user_access().partAccess("unfiltered_html")&&vc.showMessage(window.i18nLocale.unfiltered_html_access,"type-error",15e3)}(window.jQuery);
!function(t){var c=t("#vc_ui-helper-modal-ai"),e=t("#wpwrap"),a=c.find('[data-vc-ui-element="button-save"]');function l(e){window.vc.showMessage(e,"error",1e4,"#vc_ui-helper-modal-ai .vc_ui-panel-window-inner")}function r(e){t(e.target).closest('[data-vc-ui-element="button-close"]').length&&(c.removeClass("vc_active"),c.off("click",r),c.removeData(),c.find(" .vc_ui-panel-content-container").addClass("vc_ui-hidden"),c.find(" .vc_ui-helper-modal-ai-placeholder").addClass("vc_ui-hidden"),a.hide())}e.on("click",".vc_ui-icon-ai",function(e){var e=t(e.currentTarget),a=e.closest(".vc_shortcode-param"),i=null,n=e.data();a.length&&(i=a.data());var d=n.wpbAiElementType||"textarea",o=n.fieldId||d;c.find(".vc_ui-helper-modal-ai-preloader").length||c.find(".vc_ui-post-settings-header-container").after('<div class="vc_ui-helper-modal-ai-preloader"><div class="vc_ui-wp-spinner vc_ui-wp-spinner-dark vc_ui-wp-spinner-lg"></div></div>');(function(e,a){e={action:"wpb_ai_get_modal_data",data:{ai_element_type:e,ai_element_id:a},_vcnonce:window.vcAdminNonce};t.ajax({type:"POST",url:window.ajaxurl,data:e}).done(function(e){!0===e.success?(void 0===window.vc.ai_modal_view?window.vc.ai_modal_view=new vc.AiFormView({el:"#vc_ui-helper-modal-ai",data:e.data}):window.vc.ai_modal_view.render(e.data),c.find(" .vc_ui-panel-content-container").scrollTop(0),c.find(".vc_ui-helper-modal-ai-preloader").remove(),c.find(" .vc_ui-panel-content-container").removeClass("vc_ui-hidden")):e&&e.data&&e.data[0]&&e.data[0].code&&e.data[0].message?(console.error(e.data[0].message),l(e.data[0].message)):(console.error(window.i18nLocale.ai_response_error),l(window.i18nLocale.ai_response_error))}).fail(function(e){console.error(window.i18nLocale.ai_response_error),_this.resetButton(),l(window.i18nLocale.ai_response_error)})})(d,o),i?(d=a.find("."+i.param_type),c.data("element",d),t.each(i,function(e,a){c.data(e,a)})):n.fieldId&&(o=e.closest(".edit_form_line"),a=e.closest(".vc_ui-settings-text-wrapper"),d=e.closest("#postdivrich"),i=null,o.length?i=o.find("#"+n.fieldId):a.length?i=a.siblings("#"+n.fieldId):d.length&&(i=d.find("#"+n.fieldId)),c.data("fieldId",n.fieldId),c.data("element",i));c.addClass("vc_active"),c.on("click",r)})}(window.jQuery);
!function(i){window.vc.AiFormView=Backbone.View.extend({events:{"click .vc_ai-generate-button":"generateContent",'change [name="contentType"]':"changeContentType",'input [name="prompt"]':"changePrompt",'click [data-vc-ui-element="button-save"]':"insertContent"},seconds:0,minutes:0,timerInterval:null,isGenerating:!1,maxWaitingCacheInterval:9e5,maxPromptLength:2e3,initialize:function(e){this.toggleModalPromoClass(e.data.type),this.$el.find(".vc_ui-helper-modal-ai-preloader").after(e.data.content),this.setFormElements(),i(".edit-form-info").initializeTooltips()},render:function(e){return this.timerInterval&&this.clearTimer(),this.toggleModalPromoClass(e.type),this.$form.after(e.content),this.$form.remove(),this.setFormElements(),this},setFormElements:function(){this.$form=this.$el.find(".vc_ui-panel-content-container"),this.$generate_button=this.$el.find(".vc_ai-generate-button"),this.$close_button=this.$el.find('[data-vc-ui-element="button-close"]'),this.$insert_button=this.$el.find('[data-vc-ui-element="button-save"]'),this.$generated_content=this.$el.find(".wpb_ai-generated-content"),this.$prompt_field=this.$el.find('[name="prompt"]'),this.$generate_placeholder=this.$el.find(".vc_ui-helper-modal-ai-placeholder"),this.$generate_placeholder_timer=this.$generate_placeholder.find(".vc_ai-timer"),this.initialButtonText=this.$generate_button.text().trim(),this.contentType=this.$el.find('[name="contentType"]').val(),"new_content"!==this.contentType||this.$prompt_field.val().trim()||this.disableButton()},generateContent:function(e){e.preventDefault();var r=this,e=this.$prompt_field.val().split(" "),e=(this.maxPromptLength<e.length&&this.$prompt_field.val(e.slice(0,this.maxPromptLength).join(" ")),this.$form.find(':visible:not([style*="display: none"]), [name="prompt"], input[type="hidden"]').serializeArray()),n=this.getUniqueCacheId(),e=(e.push({name:"cacheId",value:n}),this.$generated_content.val(""),{action:"wpb_ai_api_get_response",data:e,_vcnonce:window.vcAdminNonce});this.isGenerating=!0,this.$generate_placeholder.removeClass("vc_ui-hidden"),this.timerInterval=setInterval(this.updateTimer.bind(this),1e3),i.ajax({type:"POST",url:window.ajaxurl,timeout:2e4,data:e}).done(function(e){if(!r.isGenerating)return!1;!0===e.success?(r.$generated_content.val(e.data),r.resetButton(!0),r.$insert_button.show()):e&&e.data&&e.data[0]&&e.data[0].code&&e.data[0].message?(console.error(e.data[0].code,e.data[0].message),r.resetButton(!1),e=e.data[0].message.replace(/\\/g,""),r.showErrorMessage(e)):(console.error(window.i18nLocale.ai_response_error),r.resetButton(!1),r.showErrorMessage(window.i18nLocale.ai_response_error))}).fail(function(e){if(!r.isGenerating)return!1;if(e&&!e.statusText)console.error(window.i18nLocale.ai_response_error),r.resetButton(!1),r.showErrorMessage(window.i18nLocale.ai_response_error);else if("timeout"!==e.statusText)console.error(window.i18nLocale.ai_response_error),r.resetButton(!1),r.showErrorMessage(window.i18nLocale.ai_response_error);else for(var i={action:"wpb_ai_generate_content_check_cache",data:{type:"generate-text",messaged_data:!0,cacheId:n},_vcnonce:window.vcAdminNonce},a=[],t=1e4;t<=r.maxWaitingCacheInterval;t+=1e4)!function(n){a.push(setTimeout(function(){var e=r.$generated_content.val();if(e)for(var t=0;t<a.length;t++)"stop_cache_timeouts"===e&&r.$generated_content.val(""),clearTimeout(a[t]);else r.processCachedRequest(r,i,n)},n))}(t)})},processCachedRequest:function(t,e,n){this.maxWaitingCacheInterval===n?(console.error(window.i18nLocale.ai_response_error),t.resetButton(!1),t.showErrorMessage(window.i18nLocale.ai_response_error)):i.ajax({type:"POST",url:window.ajaxurl,timeout:1e4,data:e}).done(function(e){if(!t.isGenerating)return!1;!0===e.success&&e.data&&"cache_in_process"!==e.data&&(t.$generated_content.val(e.data),t.resetButton(!0),t.$insert_button.show()),!1===e.success&&e&&e.data&&e.data[0]&&e.data[0].code&&e.data[0].message&&(t.$generated_content.val("stop_cache_timeouts"),t.resetButton(!1),e=e.data[0].message.replace(/\\/g,""),t.showErrorMessage(e))})},getUniqueCacheId:function(){return Date.now().toString(36)+Math.random().toString(36).slice(2)},disableButton:function(){this.$generate_button.prop("disabled",function(e,t){return!t}),this.isGenerateDisabled=!0},resetButton:function(e){e=e?"Regenerate":this.initialButtonText;this.$generate_button.removeAttr("disabled style"),this.$generate_button.text(e),this.$generate_button.blur(),this.clearTimer()},clearTimer:function(){this.$generate_placeholder.addClass("vc_ui-hidden"),this.$generate_placeholder_timer.text("00:00"),clearInterval(this.timerInterval),this.seconds=0,this.minutes=0,this.isGenerating=!1},updateTimer:function(){this.seconds++,60===this.seconds&&(this.seconds=0,this.minutes++);var e=String(this.minutes).padStart(2,"0"),t=String(this.seconds).padStart(2,"0");this.$generate_placeholder_timer.text(e+":"+t)},changeContentType:function(e){this.contentType=e.target.value;var t=this.$el.data(),n=(n=i(e.target).find("option:selected").attr("data-form-fields-optionality"))?n.split("|"):[];this.hideFormFields(n),this.$form.trigger("reset"),this.$form.find('[name="contentType"]').val(this.contentType),"improve_existing"===e.target.value||"translate"===e.target.value?(this.$generate_button.text(window.i18nLocale.regenerate),n=t.element.val(),"textarea_raw_html"===t.param_type?n=rawurldecode(base64_decode(n.trim())):"textarea_html"===t.param_type&&(n=window.tinymce.get(t.element.attr("id")).getContent()),this.$form.find('[name="prompt"]').val(n),this.resetButton(!0)):(this.$generate_button.text(window.i18nLocale.generate),this.$form.find('[name="prompt"]').val(""),this.disableButton())},changePrompt:function(e){this.isGenerateDisabled&&e.target.value?(this.resetButton(!1),this.isGenerateDisabled=!1):e.target.value||this.isGenerateDisabled||this.disableButton();var t=e.target.value.split(" ");t.length>this.maxPromptLength&&(e.target.value=t.slice(0,this.maxPromptLength).join(" "))},showErrorMessage:function(e){window.vc.showMessage(e,"error",1e4,"#vc_ui-helper-modal-ai .vc_ui-panel-window-inner")},insertContent:function(){var e=this.$el.find(".wpb_ai-generated-content").val();if(!e)return!1;var t,n,i=this.$el.data();"textarea_html"===i.param_type||"content"===i.fieldId?(n=(t=i.element).attr("id"),"new_content"===this.contentType&&(e=t.val()+" "+e),(n=window.tinymce.get(n))&&n.setContent(e),t.val(e).trigger("input").trigger("change").trigger("blur")):["textarea","textfield","textarea_raw_html"].includes(i.param_type)?(n=i.element,"new_content"===this.contentType&&(e=n.val()+" "+e),n.val(e).trigger("input").trigger("change").trigger("blur")):i.fieldId&&(["wpb_css_editor","wpb_js_header_editor","wpb_js_footer_editor"].includes(i.fieldId)?(e=window.ace.edit(i.fieldId).getValue()+"\n\n"+e,window.ace.edit(i.fieldId).setValue(e).trigger("input").trigger("change").trigger("blur")):i.element&&i.element.length&&("new_content"===this.contentType&&(e=i.element.val()+" "+e),i.element.val(e).trigger("input").trigger("change").trigger("blur"))),this.$close_button.click()},toggleModalPromoClass:function(e){"promo"===e?this.$el.addClass("vc_modal-ai-container--promo"):this.$el.removeClass("vc_modal-ai-container--promo")},hideFormFields:function(n){this.$form.find("div[data-optional-form-field]").each(function(){var e=i(this),t=e.attr("data-optional-form-field");n.includes(t)?e.show():e.hide()})}})}(window.jQuery);
!function(i){_.isUndefined(window.vc)&&(window.vc={}),window.Vc_settingsModules=Backbone.View.extend({el:"#vc_settings-modules",events:{"change .module-toggle":"setModulesValues"},setModulesValues:function(){var e={};i(".module-toggle").each(function(){e[this.id]=!!this.checked}),i("#wpb_js_modules").val(JSON.stringify(e))}}),i(document).ready(function(){window.vc.settingModules=new window.Vc_settingsModules,i(".edit-form-info").initializeTooltips(".form-table")})}(window.jQuery);
!function(s){s.fn.initializeTooltips=function(a){return this.each(function(){var t,e=this,o=s(this).next(".tooltip-content")[0];function n(){clearTimeout(t),e.setAttribute("data-show",""),r.update()}function i(){t=setTimeout(function(){e.removeAttribute("data-show")},500)}["mouseenter","focus"].forEach(function(t){e.addEventListener(t,n),o.addEventListener(t,n)}),["mouseleave","blur"].forEach(function(t){e.addEventListener(t,i),o.addEventListener(t,i)}),a=a||".vc_shortcode-param";var r=Popper.createPopper(e,o,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[10,5]}},{name:"preventOverflow",options:{boundary:e.closest(a),altAxis:!0,tether:!1,rootBoundary:"document"}}]})}),this}}(jQuery);